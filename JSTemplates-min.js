(function(a){if(a.JSTemplates===void 0)a.JSTemplates={};a.JSTemplates.substitute=function(e,f){var b=a.JSTemplates.newEvalInlineTemplates(e,f);return b=b.replace(/\$\{([^\s\}]+)(?:([^\s\}]+))?\}/g,function(b,g){var c=g.split(":"),e=a.JSTemplates.resolveKey(c[c.length-1],f);c.length>1&&(c=a("#"+c[0]),e=a("<div></div>").append(c.applyTemplate(e)).html());return e.toString()})};a.JSTemplates.evalInlineTemplates=function(e,f){var b=a(e),d=b.find("template").get().reverse();a(d).each(function(){var b=
a(this),c=b.attr("data"),c=a.JSTemplates.resolveKey(c,f),c=b.applyTemplate(c);b.after(c).remove()});return a("<div></div>").append(b).html()};a.JSTemplates.newEvalInlineTemplates=function(e,f){for(var b=e.split("<template"),d=b.length-1;d>=0;d--){var g=b[d].split("</template>"),c="",h="",i="";g.length>1&&(c=b.pop().replace("</template>",""),c=c.replace(/data\='([^\s]+)'>/,function(b,c){h=c;return""}),i=a.JSTemplates.resolveKey(h,f),c=a.JSTemplates.substitute(c,i),b[d-1]+=c,g.length>2&&(b[d-1]+=g.join("</template>")))}return b.join("")};
a.JSTemplates.resolveKey=function(a,f){for(var b=a.split("."),d=f,g="",c=0;c<b.length;c++)if(g=b[c],d[g]!=void 0)d=d[g];else{d="";console&&console.log("Key: "+a+" element "+g+" undefined in template map");break}return d}})(jQuery);(function(a){a.fn.applyTemplate=function(e){var f=this.html(),b="",d;if(e instanceof Array)for(d in e)b+=a.JSTemplates.substitute(f,e[d]);else b=a.JSTemplates.substitute(f,e);return a(b)}})(jQuery);
